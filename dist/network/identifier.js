import { __awaiter } from "tslib";
import axios from "axios";
const identify = (username, password) => __awaiter(void 0, void 0, void 0, function* () {
    console.log(`[fetch]`, "signing a public identifier.");
    const res = yield axios("https://mongodb-rest.vercel.app/api/auth/signin/public/key").then(response => response.data);
    console.log(res);
    if (res.error.message !== "none") {
        throw new Error("[fetch] recieved error:" + res.error.message);
    }
    else {
        return res.bearer;
    }
});
export default identify;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaWRlbnRpZmllci5qcyIsInNvdXJjZVJvb3QiOiJzcmMvIiwic291cmNlcyI6WyJuZXR3b3JrL2lkZW50aWZpZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sS0FBSyxNQUFNLE9BQU8sQ0FBQztBQUUxQixNQUFNLFFBQVEsR0FBRyxDQUFPLFFBQVMsRUFBRSxRQUFTLEVBQUUsRUFBRTtJQUM1QyxPQUFPLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSw4QkFBOEIsQ0FBQyxDQUFBO0lBQ3RELE1BQU0sR0FBRyxHQUFHLE1BQU0sS0FBSyxDQUFDLDREQUE0RCxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3RILE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDakIsSUFBSSxHQUFHLENBQUMsS0FBSyxDQUFDLE9BQU8sS0FBSyxNQUFNLEVBQUU7UUFDOUIsTUFBTSxJQUFJLEtBQUssQ0FBQyx5QkFBeUIsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0tBQ2xFO1NBQU07UUFDSCxPQUFPLEdBQUcsQ0FBQyxNQUFNLENBQUM7S0FDckI7QUFDTCxDQUFDLENBQUEsQ0FBQTtBQUNELGVBQWUsUUFBUSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF4aW9zIGZyb20gXCJheGlvc1wiO1xyXG5cclxuY29uc3QgaWRlbnRpZnkgPSBhc3luYyAodXNlcm5hbWU/LCBwYXNzd29yZD8pID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGBbZmV0Y2hdYCwgXCJzaWduaW5nIGEgcHVibGljIGlkZW50aWZpZXIuXCIpXHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBheGlvcyhcImh0dHBzOi8vbW9uZ29kYi1yZXN0LnZlcmNlbC5hcHAvYXBpL2F1dGgvc2lnbmluL3B1YmxpYy9rZXlcIikudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5kYXRhKTtcclxuICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICBpZiAocmVzLmVycm9yLm1lc3NhZ2UgIT09IFwibm9uZVwiKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiW2ZldGNoXSByZWNpZXZlZCBlcnJvcjpcIiArIHJlcy5lcnJvci5tZXNzYWdlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5iZWFyZXI7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgaWRlbnRpZnk7Il19